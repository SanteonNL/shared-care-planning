<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
    <title>Security - Authorization - Shared Care Planning (SCP) Implementation Guide v0.1.0</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link href="fhir.css" rel="stylesheet"/>

    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap-fhir.css" rel="stylesheet"/>

    <!-- Project extras -->
    <link href="assets/css/project.css" rel="stylesheet"/>
    <link href="assets/css/pygments-manni.css" rel="stylesheet"/>
    <link href="assets/css/jquery-ui.css" rel="stylesheet"/>
  	<link href="assets/css/prism.css" rel="stylesheet" />
    <!-- Placeholder for child template CSS declarations -->

    <script type="text/javascript" src="fhir-table-scripts.js"> </script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif]-->

    <!-- Favicons -->
    <link rel="fhir-logo" sizes="144x144" href="assets/ico/icon-fhir-144.png"/>
    <link rel="fhir-logo" sizes="114x114" href="assets/ico/icon-fhir-114.png"/>
    <link rel="fhir-logo" sizes="72x72" href="assets/ico/icon-fhir-72.png"/>
    <link rel="fhir-logo" href="assets/ico/icon-fhir-57.png"/>
    <link rel="shortcut icon" href="assets/ico/favicon.png"/>
  </head>
  <body onload="document.body.style.opacity='1'">

	  <script src="assets/js/prism.js"></script>

    <style type="text/css">h2{--heading-prefix:"4"}
    h3,h4,h5,h6{--heading-prefix:"4"}</style>
    <div id="segment-header" class="segment">  <!-- segment-header -->
      <div class="container">  <!-- container -->
        <!-- Placeholder for child template header declarations -->


        <div id="ig-status">
          <p><span style="font-size:12pt;font-weight:bold">Shared Care Planning (SCP) Implementation Guide</span>
            <br/>
            <span style="display:inline-block;">0.1.0 - ci-build


            </span>
          </p>
        </div>
      </div> <!-- /container -->
    </div>  <!-- /segment-header -->

    <div id="segment-navbar" class="segment">  <!-- segment-navbar -->
      <div id="stripe"> </div>
      <div class="container">  <!-- container -->
        <!-- HEADER CONTENT -->

        <nav class="navbar navbar-inverse">
          <!--status-bar-->
          <div class="container">
            <button data-target=".navbar-inverse-collapse" class="navbar-toggle" data-toggle="collapse" type="button">
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
            </button>
            <a class="navbar-brand hidden" href="http://hl7.org/fhir/R4/index.html">FHIR</a>
            <div class="nav-collapse collapse navbar-inverse-collapse">
              <!-- menu.xml  -->

<ul xmlns="http://www.w3.org/1999/xhtml" class="nav navbar-nav">
  <li>
    <a href="index.html">Home</a>
  </li>
  <li>
    <a href="overview.html">Overview</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Security
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="authorization.html">Authorization</a>
      </li>
      <li>
        <a href="authentication.html">Authentication</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Transactions
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="transaction-task-negotiation.html">Task negotiation and addressing care providers</a>
      </li>
      <li>
        <a href="transaction-careplan-careteam-mngt.html">CarePlan and CareTeam management</a>
      </li>
      <li>
        <a href="transaction-discovery.html">Localization of CareTeam members and Patient Information</a>
      </li>
      <li>
        <a href="transaction-autorization.html">Autorization of CareTeam members using Patient Information</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Use cases
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="usecase-specification.html">How to use nation-specific or condition-specific profile</a>
      </li>
      <li>
        <a href="usecase-enrollment.html">Enroll patient in home monitoring</a>
      </li>
      <li>
        <a href="usecase-view-all-data.html">Get data for home monitoring</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="artifacts.html">Artifacts</a>
  </li>
</ul>
            </div>  <!-- /.nav-collapse -->
          </div>  <!-- /.container -->
        </nav>  <!-- /.navbar -->
      <!-- /HEADER CONTENT -->
      </div>  <!-- /container -->
    </div>  <!-- /segment-navbar -->
    <!--status-bar-->

    <div id="segment-breadcrumb" class="segment">  <!-- segment-breadcrumb -->
      <div class="container">  <!-- container -->
        <ul class="breadcrumb">
          <li><a href='toc.html'><b>Table of Contents</b></a></li><li><b>Security - Authorization</b></li>

        </ul>
      </div>  <!-- /container -->
    </div>  <!-- /segment-breadcrumb -->

    <a name="top"> </a>
    <div id="segment-content" class="segment">  <!-- segment-content -->
      <div class="container">  <!-- container -->
        <div class="row">
          <div class="inner-wrapper">

<style type="text/css">
h2:before{color:silver;counter-increment:section;content:var(--heading-prefix) " ";}
h3:before{color:silver;counter-increment:sub-section;content:var(--heading-prefix) "." counter(sub-section) " ";}
h4:before{color:silver;counter-increment:composite;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) " ";}
h5:before{color:silver;counter-increment:detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) " ";}
h6:before{color:silver;counter-increment:more-detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) "." counter(more-detail)" ";}
</style>
<div class="col-12">
  <!--ReleaseHeader--><p id="publish-box">Shared Care Planning (SCP) Implementation Guide - Local Development build (v0.1.0) built by the FHIR (HL7® FHIR® Standard) Build Tools. See the <a href="http://santeonnl.github.io/shared-care-planning/history.html">Directory of published versions</a></p><!--EndReleaseHeader-->
  <h2>Security - Authorization</h2>
  












    <p><!-- white space is critical inside of capture --></p>
<div class="markdown-toc">
<ul id="markdown-toc">
  <li><a href="#authorization" id="markdown-toc-authorization">Authorization</a>    <ul>
      <li><a href="#care-plan-service-policy" id="markdown-toc-care-plan-service-policy">Care Plan Service Policy</a></li>
      <li><a href="#audiences" id="markdown-toc-audiences">Audiences</a>        <ul>
          <li><a href="#access-token-requirements" id="markdown-toc-access-token-requirements">Access token requirements</a></li>
          <li><a href="#resource-access" id="markdown-toc-resource-access">Resource access</a></li>
        </ul>
      </li>
      <li><a href="#care-plan-contributor-policy" id="markdown-toc-care-plan-contributor-policy">Care Plan Contributor Policy</a>        <ul>
          <li><a href="#access-to-resources-of-which-the-care-plan-contributor-is-data-holder" id="markdown-toc-access-to-resources-of-which-the-care-plan-contributor-is-data-holder">Access to resources of which the Care Plan Contributor is Data Holder</a></li>
          <li><a href="#access-to-notification-service-endpoints-of-the-care-plan-contributor" id="markdown-toc-access-to-notification-service-endpoints-of-the-care-plan-contributor">Access to notification service endpoints of the Care Plan Contributor</a></li>
          <li><a href="#access-to-use-case-specific-care-data" id="markdown-toc-access-to-use-case-specific-care-data">Access to use case specific care data</a></li>
          <li><a href="#an-example-of-use-case-specific-access-rules" id="markdown-toc-an-example-of-use-case-specific-access-rules">An example of use case specific access rules.</a></li>
        </ul>
      </li>
      <li><a href="#notes--questions" id="markdown-toc-notes--questions">Notes / Questions</a></li>
    </ul>
  </li>
</ul>

</div>
<h1 id="authorization">Authorization</h1>

<p>Shared Care Planning involves authorizations  to resources that are part of a) the Shared Care Planning data model, and b) data that is use case specific. Authorizations are described in an access policy. It is the responsibility of the systems of the Care Plan Contributor and Care Plan Service to adhere to the policy when resources are being requested in the context of Shared Care Planning.</p>

<p>Shared Care Planning involves two different access policies.</p>
<ol>
  <li>The <strong>Care Plan Service policy</strong> controls access to the resources stored in the Care Plan Service (FHIR-ResourceTypes CarePlan, CareTeam and Task) and are part of the Shared Care Planning data model.</li>
  <li>The <strong>Care Plan Contributor policy</strong> controls access to resources of which the Care Plan Contributor is Data Holder and controls access to notification service endpoints the Care Plan Contributor exposes. The data controlled by the Care Plan Contributor can both be part of the Shared Care Planning data model or use case specific data.</li>
</ol>

<h2 id="care-plan-service-policy">Care Plan Service Policy</h2>

<p>The Care Plan Service Policy describes access to the resources stored in the Care Plan Service.</p>

<h2 id="audiences">Audiences</h2>
<ul>
  <li>All healthcare providers in the <code class="language-plaintext highlighter-rouge">CareTeam.participant</code>.
    <ul>
      <li>Active, the <code class="language-plaintext highlighter-rouge">CareTeam.participant.period</code> of the memberships falls within the current time.</li>
      <li>Inactive, the <code class="language-plaintext highlighter-rouge">CareTeam.participant.period</code> of the memberships falls outside the current time</li>
    </ul>
  </li>
  <li>Head Practitioner, the <code class="language-plaintext highlighter-rouge">CarePlan.author</code></li>
  <li>All healthcare providers that are <code class="language-plaintext highlighter-rouge">Task.requester</code> or <code class="language-plaintext highlighter-rouge">Task.owner</code></li>
</ul>

<h3 id="access-token-requirements">Access token requirements</h3>

<p>When requesting an access token from the authorization server of the Care Plan Service, attributes of both the requesting organization and requesting person MUST be presented (see page Authentication for the exact requirements).</p>

<h3 id="resource-access">Resource access</h3>
<p>|Resource(.element)|CRUDS|Audience/attributes|
|——–|—–|——–|
|CarePlan|C|All healthcare providers with atributes organization-identifier, practitioner-identifier, practitioner-role ?AND having an active service contract with the Care Plan Service?|
|CarePlan|RS|All healthcare providers (active and inactive) in the CareTeam|
|CarePlan.all, .Condition, .Goal, .todo|U|All active healthcare providers in the CareTeam|
|CarePlan.subject, .todo|U|not allowed|
|CarePlan|D|Head Practitioner (equals CarePlan Author)|
|Task|C|All active healthcare providers in the CareTeam|
|Task|RS|All healthcare providers (active en inactive) in the CareTeam, MAYBE: All healthcare providers that are Task.owner can acccess that specific Task (only when notification does not contain enough info)|
|Task|U|All healthcare providers that are Task.requester or Task.owner can access that specific Task|
|CareTeam|RS|All healthcare providers (active and inactive) in the CareTeam |</p>

<p>Operations that are not mentioned in the above table MUST not be supported.</p>

<h2 id="care-plan-contributor-policy">Care Plan Contributor Policy</h2>

<p>The Care Plan Contributor policy describes access to resources of which the Care Plan Contributor is <a href="https://www.european-health-data-space.com/European_Health_Data_Space_Article_2_(Proposal_3.5.2022).html">Data Holder</a> and describes access to notification service endpoints the Care Plan Contributor exposes.</p>

<h3 id="access-to-resources-of-which-the-care-plan-contributor-is-data-holder">Access to resources of which the Care Plan Contributor is Data Holder</h3>

<p><strong>Access token requirements</strong></p>

<p>When requesting an access token from the authorization server of the Care Plan Service for access to resources of which the Care Plan Contributor is Data Holder, verifiable attestations of both the requesting organization and requesting person MUST be presented (see page Authentication for the exact requirements). The credentials MUST proof the attestation of the following attributes:</p>
<ul>
  <li>Organization</li>
  <li>PractitionerRole</li>
</ul>

<p><strong>Request</strong></p>

<p>Each data request MUST include the access token AND an absolute reference to the CarePlan-resource that defines the context in which the data request takes place. The reference to the CarePlan-resource has to be included in HTTP header field as follows:
<code class="language-plaintext highlighter-rouge">http request
GET /Condition HTTP/1.1
X-SCP-Context: https://careplan-service.example.com/fhir/CarePlan/73012d35
Authorization: Bearer 03c90ce0-fe7b-44fb-aff7-b09ef4e45863
</code></p>

<p><strong>Resource access</strong></p>

<table>
  <thead>
    <tr>
      <th>Resource</th>
      <th>CRUDS</th>
      <th>Audience/attributes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Resources*</td>
      <td>RS</td>
      <td>All active PractitionerRoles in the CareTeam</td>
    </tr>
  </tbody>
</table>

<p>*The list of which resources are accessible depends on the context of the CarePlan (Patient, Condition, Request) and possibly the role of the requesting healthcare provider. Condition-Request-Resource lists MUST be specified for each use case that uses Shared Care Planning.</p>

<p>Operations that are not mentioned in the above table MUST not be supported.</p>

<h3 id="access-to-notification-service-endpoints-of-the-care-plan-contributor">Access to notification service endpoints of the Care Plan Contributor</h3>

<p><strong>Access token requirements</strong></p>

<p>When requesting an access token from the authorization server of the Care Plan Service for access to notification service endpoints of the Care Plan Contributor, attributes of the requesting organization MUST be presented (see page Authentication for the exact requirements). Attributes of a requesting person MUST NOT be presented.</p>

<p><strong>Request</strong></p>

<p>Each notification request MUST include the access token. An abolute reference to the CarePlan-resource that defines the context in which the data request takes place MUST NOT be included.</p>

<p><strong>Resource access</strong></p>

<table>
  <thead>
    <tr>
      <th>Resource</th>
      <th>CRUDS</th>
      <th>Audience/attributes/rules</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Incoming notification</td>
      <td>C</td>
      <td>All (healthcare)organizations that expose a Care Plan Service endpoint</td>
    </tr>
    <tr>
      <td>*</td>
      <td>RUDS</td>
      <td>Not allowed</td>
    </tr>
  </tbody>
</table>

<p>Operations that are not mentioned in the above table MUST not be supported.</p>

<h3 id="access-to-use-case-specific-care-data">Access to use case specific care data</h3>
<p>The Care Plan Contributor shares use case specific data with the other Care Plan Contributor(s) or Care Plan User(s) within the use case. This data is read-only by nature. Access rules are not so much defined on resource type level, instead, they are defined in resource instance level, where resources relative to the CarePlan and related entities are <em>filtered</em> within the scope of the request. The <code class="language-plaintext highlighter-rouge">X-SCP-Context</code> header provided the context of the request. The Data Holder SHOULD use the following content to apply the access rules:</p>
<ul>
  <li>CarePlan and its related data</li>
  <li>The proof of the organization’s identity.</li>
  <li>The proof of the user’s identity.</li>
</ul>

<h3 id="an-example-of-use-case-specific-access-rules">An example of use case specific access rules.</h3>

<p>The access and filtering rules COULD be articulated in a tabular format that make use of specific data related to this context, for example:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">CarePlan.subject</code> The <code class="language-plaintext highlighter-rouge">patient</code> related to the resource.</li>
  <li><code class="language-plaintext highlighter-rouge">CarePlan.addresses[Condition].code</code> The <code class="language-plaintext highlighter-rouge">type of condition</code>, like <em>COPD</em>.</li>
  <li><code class="language-plaintext highlighter-rouge">CarePlan.activity[ServiceRequest].doe</code> The <code class="language-plaintext highlighter-rouge">type of service</code>, like <em>Home monitoring</em>.</li>
  <li>Resource, the resource type.</li>
</ul>

<p>An example rules for home monitoring could look like the following:</p>

<table>
  <thead>
    <tr>
      <th>Condition.code</th>
      <th>Request.code</th>
      <th>Resource</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td> </td>
      <td> </td>
      <td>Patient?id=patient.id</td>
    </tr>
    <tr>
      <td>COPD/ longaandoeningen</td>
      <td>Thuismonitoring</td>
      <td>Condition?subject=patient&amp;category=[all somatic conditions]</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>CarePlan?id=CarePlan.id</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>CareTeam?subject=patient.id</td>
    </tr>
  </tbody>
</table>

<h2 id="notes--questions">Notes / Questions</h2>
<ul>
  <li>The careteam is supposed to have Active / Inactive members, is that managed by Period?</li>
</ul>




</div>
        </div>  <!-- /inner-wrapper -->
      </div>  <!-- /row -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-content -->

  <script type="text/javascript" src="assets/js/jquery.js"> </script>     <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
  <script type="text/javascript" src="assets/js/jquery-ui.min.js"> </script>

  <script type="text/javascript" src="assets/js/window-hash.js"> </script>
  <a name="bottom"> </a>
  <div id="segment-footer" igtool="footer" class="segment">  <!-- segment-footer -->
    <div class="container">  <!-- container -->

      <div class="inner-wrapper">
        <p>
          IG &#169; 2024+ <a style="color:var(--footer-hyperlink-text-color)" href="https://www.santeon.nl">Santeon</a>.  Package fhir.scp#0.1.0 based on <a style="color: var(--footer-hyperlink-text-color)" href="http://hl7.org/fhir/R4/">FHIR 4.0.1</a>. Generated <span title="Mon, Jul 1, 2024 03:07+0200">2024-07-01</span>
          <br/>
          <span style="color: var(--footer-highlight-text-color)">
                      Links: <a style="color: var(--footer-hyperlink-text-color)" href="toc.html">Table of Contents</a> |
                 <a style="color: var(--footer-hyperlink-text-color)" href="qa.html">QA Report</a>
                 
                
          </span>
        </p>
      </div>  <!-- /inner-wrapper -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-footer -->
  
  <div id="segment-post-footer" class="segment hidden">  <!-- segment-post-footer -->
    <div class="container">  <!-- container -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-post-footer -->
  
  <!-- JS and analytics only. -->
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script type="text/javascript" src="assets/js/bootstrap.min.js"> </script>
  <script type="text/javascript" src="assets/js/respond.min.js"> </script>
  <script type="text/javascript" src="assets/js/anchor.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard-btn.js"> </script>
  <script type="text/javascript" src="assets/js/anchor-hover.js"> </script>
  
  <!-- Analytics Below
  ================================================== -->
  </body>
</html>

